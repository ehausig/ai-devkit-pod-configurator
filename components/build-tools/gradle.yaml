id: GRADLE
name: Gradle (Java build tool)
group: build-tools
requires: java-version
description: Build automation tool for Java, Kotlin, and Groovy projects
version: "8.5"
installation:
  dockerfile: |
    RUN export DEBIAN_FRONTEND=noninteractive && \
        apt-get update && \
        apt-get install -y unzip && \
        rm -rf /var/lib/apt/lists/* && \
        ARCH=$(dpkg --print-architecture) && \
        GRADLE_VERSION="8.5" && \
        wget -q https://services.gradle.org/distributions/gradle-${GRADLE_VERSION}-bin.zip -O /tmp/gradle.zip && \
        unzip -q /tmp/gradle.zip -d /opt && \
        rm /tmp/gradle.zip && \
        mv /opt/gradle-${GRADLE_VERSION} /opt/gradle && \
        echo 'export PATH=/opt/gradle/bin:$PATH' >> /etc/profile.d/gradle.sh
  nexus_config: |
    if [ -n "$USE_NEXUS_APT" ] && [ -n "$NEXUS_APT_URL" ]; then \
        mkdir -p /etc/skel/.gradle && \
        cat > /etc/skel/.gradle/init.gradle << 'EOF'
    allprojects {
        repositories {
            maven {
                url "${NEXUS_APT_URL}/repository/maven-public/"
                allowInsecureProtocol = true
            }
        }
    }
    settingsEvaluated { settings ->
        settings.pluginManagement {
            repositories {
                maven {
                    url "${NEXUS_APT_URL}/repository/maven-public/"
                    allowInsecureProtocol = true
                }
            }
        }
    }
    EOF
    fi
  test_command: gradle --version
