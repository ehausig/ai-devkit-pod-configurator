id: RUBY_3_3
name: Ruby 3.3 (rbenv)
group: ruby-version
requires: []
description: Ruby 3.3.0 installed via rbenv
version: "3.3.0"
installation:
  dockerfile: |
    RUN export DEBIAN_FRONTEND=noninteractive && \
        apt-get update && \
        apt-get install -y rbenv ruby-build && \
        rm -rf /var/lib/apt/lists/* && \
        rbenv install 3.3.0 && \
        rbenv global 3.3.0 && \
        gem install bundler && \
        mkdir -p /etc/skel/.bundle && \
        echo '---' > /etc/skel/.bundle/config && \
        echo 'BUNDLE_PATH: "~/.bundle"' >> /etc/skel/.bundle/config && \
        echo 'BUNDLE_BIN: "~/.local/bin"' >> /etc/skel/.bundle/config && \
        echo '' >> /etc/skel/.bashrc && \
        echo '# Ruby gem paths' >> /etc/skel/.bashrc && \
        echo 'export GEM_HOME="$HOME/.bundle"' >> /etc/skel/.bashrc && \
        echo 'export PATH="$HOME/.local/bin:$HOME/.bundle/bin:$PATH"' >> /etc/skel/.bashrc
  nexus_config: |
    if [ -n "$USE_NEXUS_APT" ] && [ -n "$NEXUS_APT_URL" ]; then \
        gem sources --remove https://rubygems.org/ && \
        gem sources --add ${NEXUS_APT_URL}/repository/rubygems-proxy/ && \
        echo "gem: --source ${NEXUS_APT_URL}/repository/rubygems-proxy/" > /etc/skel/.gemrc; \
    fi
  test_command: ruby --version
memory_content: |
  #### Ruby 3.3 (via rbenv)
  
  **Ruby 3.3 Features**:
  - Prism parser (faster parsing)
  - YJIT improvements (better performance)
  - Range#overlap? method
  - Enhanced pattern matching
  
  **Rails Development**:
  - New app: `rails new myapp`
  - Server: `bin/rails server`
  - Console: `bin/rails console`
  - Generate: `bin/rails generate model User`
  - Migrate: `bin/rails db:migrate`
  
  **Testing**:
  - RSpec: `bundle add rspec-rails && bundle exec rspec`
  - Minitest: `bundle exec rake test`
  
  **Ruby Tools**:
  - IRB console: `irb`
  - Check syntax: `ruby -c file.rb`
  - Rubocop: `bundle add rubocop && bundle exec rubocop`
